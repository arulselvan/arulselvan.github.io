<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>How do manage environment based configuration node js/typescript | Arul Selvan</title>
<meta name="keywords" content="">
<meta name="description" content="Any application needs configuration settings, the programming language like ASP.NET we typically use Web.config for configuration, for different environment we have separate files like
Web.Dev.Config,
Web.QA.Config,
Web.Staging.Config,
Web.Production.Config, etc.
In nodejs app I could not find any specific standard for this but there is a multiple option to setup this configurations, below I used .json file for different environment.
Folder Structure.

default.json - this will hold all the base configuration and common to all the environment
Sample:">
<meta name="author" content="arul">
<link rel="canonical" href="https://arulselvan.net/manage-environment-based-configuration-node-jstypescript/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.6da9a63d25a9608bca2f7f907a030e887a7dd3c3f3918e4cc113129361414bda.css" integrity="sha256-bammPSWpYIvKL3&#43;QegMOiHp908PzkY5MwRMSk2FBS9o=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://arulselvan.net/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://arulselvan.net/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://arulselvan.net/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://arulselvan.net/apple-touch-icon.png">
<link rel="mask-icon" href="https://arulselvan.net/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://arulselvan.net/manage-environment-based-configuration-node-jstypescript/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://arulselvan.net/manage-environment-based-configuration-node-jstypescript/">
  <meta property="og:site_name" content="Arul Selvan">
  <meta property="og:title" content="How do manage environment based configuration node js/typescript">
  <meta property="og:description" content="Any application needs configuration settings, the programming language like ASP.NET we typically use Web.config for configuration, for different environment we have separate files like
Web.Dev.Config, Web.QA.Config, Web.Staging.Config, Web.Production.Config, etc.
In nodejs app I could not find any specific standard for this but there is a multiple option to setup this configurations, below I used .json file for different environment.
Folder Structure. default.json - this will hold all the base configuration and common to all the environment Sample:">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2017-08-07T07:12:35+00:00">
    <meta property="article:modified_time" content="2017-08-07T07:12:35+00:00">
    <meta property="og:image" content="https://arulselvan.net/wp-content/uploads/2017/08/App-to-App-Deployment-Feature.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://arulselvan.net/wp-content/uploads/2017/08/App-to-App-Deployment-Feature.png">
<meta name="twitter:title" content="How do manage environment based configuration node js/typescript">
<meta name="twitter:description" content="Any application needs configuration settings, the programming language like ASP.NET we typically use Web.config for configuration, for different environment we have separate files like
Web.Dev.Config,
Web.QA.Config,
Web.Staging.Config,
Web.Production.Config, etc.
In nodejs app I could not find any specific standard for this but there is a multiple option to setup this configurations, below I used .json file for different environment.
Folder Structure.

default.json - this will hold all the base configuration and common to all the environment
Sample:">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://arulselvan.net/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "How do manage environment based configuration node js/typescript",
      "item": "https://arulselvan.net/manage-environment-based-configuration-node-jstypescript/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "How do manage environment based configuration node js/typescript",
  "name": "How do manage environment based configuration node js\/typescript",
  "description": "Any application needs configuration settings, the programming language like ASP.NET we typically use Web.config for configuration, for different environment we have separate files like\nWeb.Dev.Config, Web.QA.Config, Web.Staging.Config, Web.Production.Config, etc.\nIn nodejs app I could not find any specific standard for this but there is a multiple option to setup this configurations, below I used .json file for different environment.\nFolder Structure. default.json - this will hold all the base configuration and common to all the environment Sample:\n",
  "keywords": [
    
  ],
  "articleBody": "Any application needs configuration settings, the programming language like ASP.NET we typically use Web.config for configuration, for different environment we have separate files like\nWeb.Dev.Config, Web.QA.Config, Web.Staging.Config, Web.Production.Config, etc.\nIn nodejs app I could not find any specific standard for this but there is a multiple option to setup this configurations, below I used .json file for different environment.\nFolder Structure. default.json - this will hold all the base configuration and common to all the environment Sample:\n{ \"appName\": \"Sample Application\", \"cookieEnabled\": true, \"sessionEnabled\": true } .json - for every environment there will be a separate .json file, this contain configuration specific to that particular environment, this will override our base default values if same key exist. Sample: development.json\n{ \"db\": { \"connection\": \"mongodb://localhost:27017/sample_dev\" } } How its works? In the index.js we getting configuration files using require and merging default and respecting environment file then doing export.\nvar defaults = require(\"./default.json\"); var envConfig = require(\"./\" + (process.env.NODE_ENV || \"development\")+\".json\"); export const config:any = Object.assign({}, defaults, envConfig); process.env.NODE_ENV is environment value, we can set on respective server, for testing I used npm script to set this value in my package.json\n\"scripts\": { \"start\": \"export NODE_ENV=production \u0026\u0026 npm run build-server \u0026\u0026 npm run start-node\", \"build-server\": \"npm run copy-server-config \u0026\u0026 ntsc -p server\", \"copy-server-config\": \"copyfiles -u 1 ./server/config/**/*.json ./dist_serv\", \"start-node\": \"node dist_serv/server.js\" }, Note: I tried with mac system, so setting environment value using “export NODE_ENV=production”, If you trying with windows may be need to change the command slightly like “SET NODE_ENV=production”.\nI used Typescript on the server, so during build copied all my configuration to deployment folder.\nOkay, how to access these configuration inside application?\nimport the config and use wherever needs across the app, below snap getting mongo db connection value using key “config.db.connection”\nimport * as Mongoose from \"mongoose\"; import { config } from \"./../config\"; export class DataAccess { static mongooseInstance: any; static mongooseConnection: Mongoose.Connection; constructor() { DataAccess.connect(); } static connect(): Mongoose.Connection { if (this.mongooseInstance) return this.mongooseInstance; this.mongooseConnection = Mongoose.connection; this.mongooseConnection.once(\"open\", () =\u003e { console.log(\"Connected mongodb.\"); }); var dbConnection = config.db.connection; this.mongooseInstance = Mongoose.connect(dbConnection); return this.mongooseInstance; } } DataAccess.connect(); sample available on following path: https://github.com/arulselvan/practice/tree/master/nodejs/environment-based-configuration\n",
  "wordCount" : "356",
  "inLanguage": "en",
  "image":"https://arulselvan.net/wp-content/uploads/2017/08/App-to-App-Deployment-Feature.png","datePublished": "2017-08-07T07:12:35Z",
  "dateModified": "2017-08-07T07:12:35Z",
  "author":{
    "@type": "Person",
    "name": "arul"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://arulselvan.net/manage-environment-based-configuration-node-jstypescript/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Arul Selvan",
    "logo": {
      "@type": "ImageObject",
      "url": "https://arulselvan.net/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://arulselvan.net/" accesskey="h" title="Arul Selvan (Alt + H)">Arul Selvan</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://arulselvan.net/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://arulselvan.net/talks/" title="Talks">
                    <span>Talks</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      How do manage environment based configuration node js/typescript
    </h1>
    <div class="post-meta"><span title='2017-08-07 07:12:35 +0000 +0000'>August 7, 2017</span>&nbsp;·&nbsp;arul

</div>
  </header> 
<figure class="entry-cover">
        <img loading="eager" src="https://arulselvan.net/wp-content/uploads/2017/08/App-to-App-Deployment-Feature.png" alt="App-to-App-Deployment-Feature">
        
</figure>
  <div class="post-content"><p>Any application needs configuration settings, the programming language like ASP.NET we typically use Web.config for configuration, for different environment we have separate files like</p>
<p>Web.Dev.Config,
Web.QA.Config,
Web.Staging.Config,
Web.Production.Config, etc.</p>
<p>In nodejs app I could not find any specific standard for this but there is a multiple option to setup this configurations, below I used .json file for different environment.</p>
<p>Folder Structure.
<a href="/wp-content/uploads/2017/07/Screen-Shot-2017-07-10-at-3.09.52-PM.png"><img loading="lazy" src="/wp-content/uploads/2017/07/Screen-Shot-2017-07-10-at-3.09.52-PM-300x295.png"></a></p>
<p>default.json - this will hold all the base configuration and common to all the environment
Sample:</p>
<pre tabindex="0"><code>{
  &#34;appName&#34;: &#34;Sample Application&#34;,
  &#34;cookieEnabled&#34;: true,
  &#34;sessionEnabled&#34;: true
}
</code></pre><p><!-- raw HTML omitted -->.json - for every environment there will be a separate  .json file, this contain configuration specific to that particular environment, this will override our base default values if same key exist.
Sample: development.json</p>
<pre tabindex="0"><code>{
  &#34;db&#34;: {
    &#34;connection&#34;: &#34;mongodb://localhost:27017/sample_dev&#34;
  }
}
</code></pre><p><strong>How its works?</strong>
In the index.js we getting  configuration files using require and merging default and respecting environment file then doing export.</p>
<pre tabindex="0"><code>var defaults = require(&#34;./default.json&#34;);
var envConfig = require(&#34;./&#34; + (process.env.NODE_ENV || &#34;development&#34;)+&#34;.json&#34;);
export const config:any = Object.assign({}, defaults, envConfig);
</code></pre><p>process.env.NODE_ENV is environment value, we can set on respective server, for testing I used npm script to set this value in my package.json</p>
<pre tabindex="0"><code>&#34;scripts&#34;: {
    &#34;start&#34;: &#34;export NODE_ENV=production  &amp;&amp; npm run build-server &amp;&amp; npm run start-node&#34;,
    &#34;build-server&#34;: &#34;npm run copy-server-config &amp;&amp; ntsc -p server&#34;,
    &#34;copy-server-config&#34;: &#34;copyfiles -u 1 ./server/config/**/*.json ./dist_serv&#34;,
    &#34;start-node&#34;: &#34;node dist_serv/server.js&#34;
  },
</code></pre><p>Note: I tried with mac system, so setting environment value using &ldquo;export NODE_ENV=production&rdquo;, If you trying with windows may be need to change the command slightly like  &ldquo;SET NODE_ENV=production&rdquo;.</p>
<p>I used Typescript on the server, so during build copied all my configuration to deployment folder.</p>
<p><strong>Okay, how to access these configuration inside application?</strong></p>
<p>import the config and use wherever needs across the app, below snap  getting mongo db connection value using key &ldquo;config.db.connection&rdquo;</p>
<pre tabindex="0"><code>import * as Mongoose from &#34;mongoose&#34;;
import { config } from &#34;./../config&#34;;

export class DataAccess {
    static mongooseInstance: any;
    static mongooseConnection: Mongoose.Connection;

    constructor() {
        DataAccess.connect();
    }

    static connect(): Mongoose.Connection {

        if (this.mongooseInstance) return this.mongooseInstance;

        this.mongooseConnection = Mongoose.connection;
        this.mongooseConnection.once(&#34;open&#34;, () =&gt; {
            console.log(&#34;Connected mongodb.&#34;);
        });

        var dbConnection = config.db.connection;
        this.mongooseInstance = Mongoose.connect(dbConnection);

        return this.mongooseInstance;
    }
}

DataAccess.connect();
</code></pre><p>sample available on following path: <a href="https://github.com/arulselvan/practice/tree/master/nodejs/environment-based-configuration">https://github.com/arulselvan/practice/tree/master/nodejs/environment-based-configuration</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://arulselvan.net/">Arul Selvan</a></span> · 

</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
