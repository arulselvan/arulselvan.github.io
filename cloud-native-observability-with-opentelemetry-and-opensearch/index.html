<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Observability Solutions with Open Telemetry &#43; OpenSearch | Arul Selvan</title>
<meta name="keywords" content="">
<meta name="description" content="Observability is an essential and unavoidable piece part of distributed application architectures, there are many tools for observability, and in this post, we going to describe using OpenTelemetry and OpenSearch along with some dependent open-source tools to build the solutions.
What is Observability?
The act of collecting and analyzing data from applications and infrastructure so that you can  understand their internal states and be alerted to, troubleshoot, and resolve issues with application availability and performance">
<meta name="author" content="arul">
<link rel="canonical" href="https://arulselvan.net/cloud-native-observability-with-opentelemetry-and-opensearch/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.ae3d277e69647c027e65dd7c785748f912a9be2d37da0061b9ff15a5d7fafb7b.css" integrity="sha256-rj0nfmlkfAJ&#43;Zd18eFdI&#43;RKpvi032gBhuf8Vpdf6&#43;3s=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://arulselvan.net/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://arulselvan.net/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://arulselvan.net/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://arulselvan.net/apple-touch-icon.png">
<link rel="mask-icon" href="https://arulselvan.net/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://arulselvan.net/cloud-native-observability-with-opentelemetry-and-opensearch/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://arulselvan.net/cloud-native-observability-with-opentelemetry-and-opensearch/">
  <meta property="og:site_name" content="Arul Selvan">
  <meta property="og:title" content="Observability Solutions with Open Telemetry &#43; OpenSearch">
  <meta property="og:description" content="Observability is an essential and unavoidable piece part of distributed application architectures, there are many tools for observability, and in this post, we going to describe using OpenTelemetry and OpenSearch along with some dependent open-source tools to build the solutions.
What is Observability?
The act of collecting and analyzing data from applications and infrastructure so that you can understand their internal states and be alerted to, troubleshoot, and resolve issues with application availability and performance">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-10-26T10:32:55+00:00">
    <meta property="article:modified_time" content="2022-10-26T10:32:55+00:00">
    <meta property="og:image" content="https://arulselvan.net/wp-content/uploads/2022/10/opentelemetryandopensearch.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://arulselvan.net/wp-content/uploads/2022/10/opentelemetryandopensearch.png">
<meta name="twitter:title" content="Observability Solutions with Open Telemetry &#43; OpenSearch">
<meta name="twitter:description" content="Observability is an essential and unavoidable piece part of distributed application architectures, there are many tools for observability, and in this post, we going to describe using OpenTelemetry and OpenSearch along with some dependent open-source tools to build the solutions.
What is Observability?
The act of collecting and analyzing data from applications and infrastructure so that you can  understand their internal states and be alerted to, troubleshoot, and resolve issues with application availability and performance">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://arulselvan.net/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Observability Solutions with Open Telemetry + OpenSearch",
      "item": "https://arulselvan.net/cloud-native-observability-with-opentelemetry-and-opensearch/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Observability Solutions with Open Telemetry + OpenSearch",
  "name": "Observability Solutions with Open Telemetry \u002b OpenSearch",
  "description": "Observability is an essential and unavoidable piece part of distributed application architectures, there are many tools for observability, and in this post, we going to describe using OpenTelemetry and OpenSearch along with some dependent open-source tools to build the solutions.\nWhat is Observability?\nThe act of collecting and analyzing data from applications and infrastructure so that you can understand their internal states and be alerted to, troubleshoot, and resolve issues with application availability and performance\n",
  "keywords": [
    
  ],
  "articleBody": "Observability is an essential and unavoidable piece part of distributed application architectures, there are many tools for observability, and in this post, we going to describe using OpenTelemetry and OpenSearch along with some dependent open-source tools to build the solutions.\nWhat is Observability?\nThe act of collecting and analyzing data from applications and infrastructure so that you can understand their internal states and be alerted to, troubleshoot, and resolve issues with application availability and performance\nObservability goal? is to troubleshoot the applications, not only that it helps improve the overall end-user experience from many perspectives…\nSolution Architecture: Below is the used self-managed open-source components to build the solutions.\nOpenTelemetry Instrumentations \u0026 Collector: Vendor-agnostic way to receive, process, and export telemetry data. More Detail\nFluentBit: super fast, lightweight, and highly scalable logging and metrics processor and forwarder More Details\nData Prepper: an open-source data collector for observability data (trace, logs, metrics) that can filter, enrich, transform, normalize, and aggregate data for downstream analysis and visualization More Detail\nOpenSearch \u0026 OpenSearch Dashboards: OpenSearch is a community-driven, Apache 2.0-licensed open-source search, that forked and developed from Elasticsearch 7.10 and its analytics suite that makes it easy to ingest, search, visualize, and analyze data. It consists of a data store and search engine (OpenSearch), and a visualization and user interface (OpenSearch Dashboards). More Detail\nPrometheus: open-source systems monitoring and alerting toolkit More Detail\nGrafana: Grafana allows you to query, visualize, alert on and understand your metrics no matter where they are stored More Detail\nAlright, let’s start with the quick demo, I’ve below simple dummy microservices for this demonstration with different programming languages Nodejs, Go, and C# to showcase the language agnostic. For Metrics tried data-prepper as experimental and not included Prometheus since that is the common standard for metrics.\nSample application flow:\nThese applications will send telemetry data (trace, metrics) information using the Opentelemetry instrumentation to the local OTel collector agent and the log will be written in a regular console and forwarded to Fluentbit. Then these OTel and Fluentbit agents send that information to data-prepper. Data-prepper transforms and stores it in OpenSearch.\nUsually, the monitoring setup for a cloud-native application will be deployed on Kubernetes with service discovery and high availability, but this post is for a quick prototype and setup using a single node from all the components with the docker-compose files.\nobservability/docker-compose.yaml contain all the observability components\ndocker-compose.yaml contains the sample microservices containers.\nLet’s run it.\ndocker-compose -f observability/docker-compose.yaml up -d docker-compose -f docker-compose.yaml up -d That’s it, both application and observability containers are up and running, let me invoke chat initiate API from the browser\nAwesome, we could see the logs, trace, and metrics information in our Open search UI :)\nOkay, today’s challenges and what’s Next?\nLogging : If you see our diagram there will be two agents Fluent and Opentelemetry Collector, the reason is that Opentelemetry Collector still doing development for the Logging signal for many programming languages. Very soon either one will be our agent for all signals(logs, trace, metrics) to collect, and forward from applications.\nAnother problem here, we used 3 programming languages, each using its own structure logging library Nodejs(Winston), .NET (Serilog), and Go (Zap) and all the Log Model is different, even the same we could see in the sample. If we want to achieve we should have a common contract across the programing language. open telemetry Log Model specification has this, once Opentelemetry Logging matures we will have this common structure and fields across the programing language without any additional efforts.\nBelow is the current status of open telemetry instrumentations for the programing language we used, for a complete supported programing language visit here.\nLanguageTracesMetrics****Logs.NETstablestableLogger is stable but the exporter is not stableGostableAlphaNot yet implementedJavascriptstableRelease candidateDevelopment\nMetrics: Data-Prepper and OpenSearch were tried as experimental but If you see the diagram Promotheious will be the solution for metrics, our example doesn’t include the same, Promotehus have many features. I think Metrics are still experimental in data-prepper, but If Open search and data-prepper metrics are stable, I think in most use cases it would be an awesome solution.\nConclusion: There are many tools and platforms available for observability solutions mostly some doing this in their specific area example tracing (Jaeger, Zipkin, etc) and Metrics(Promitious, etc), but one great benefit Open search tries to bring all the signals to one backend for better correlation and monitoring and fully open source solution.\nSource Code GitHub URL: https://github.com/arulselvan/wizchat/tree/practice-observability\n",
  "wordCount" : "741",
  "inLanguage": "en",
  "image":"https://arulselvan.net/wp-content/uploads/2022/10/opentelemetryandopensearch.png","datePublished": "2022-10-26T10:32:55Z",
  "dateModified": "2022-10-26T10:32:55Z",
  "author":{
    "@type": "Person",
    "name": "arul"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://arulselvan.net/cloud-native-observability-with-opentelemetry-and-opensearch/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Arul Selvan",
    "logo": {
      "@type": "ImageObject",
      "url": "https://arulselvan.net/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://arulselvan.net/" accesskey="h" title="Arul Selvan (Alt + H)">Arul Selvan</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://arulselvan.net/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://arulselvan.net/talks/" title="Talks">
                    <span>Talks</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Observability Solutions with Open Telemetry &#43; OpenSearch
    </h1>
    <div class="post-meta"><span title='2022-10-26 10:32:55 +0000 +0000'>October 26, 2022</span>&nbsp;·&nbsp;arul

</div>
  </header> 
<figure class="entry-cover">
        <img loading="eager" src="https://arulselvan.net/wp-content/uploads/2022/10/opentelemetryandopensearch.png" alt="opentelemetryandopensearch">
        
</figure>
  <div class="post-content"><p>Observability is an essential and unavoidable piece part of distributed application architectures, there are many tools for observability, and in this post, we going to describe using OpenTelemetry and OpenSearch along with some dependent open-source tools to build the solutions.</p>
<p><strong>What is Observability?</strong></p>
<p>The act of collecting and analyzing data from applications and infrastructure so that you can  understand their internal states and be alerted to, troubleshoot, and resolve issues with application availability and performance</p>
<p><strong>Observability</strong> <strong>goal?</strong> is to troubleshoot the applications, not only that it helps improve the overall end-user experience from many perspectives&hellip;</p>
<p><strong>Solution Architecture:</strong> Below is the used self-managed open-source components to build the solutions.</p>
<p><a href="/wp-content/uploads/2022/10/observability-solution.png"><img loading="lazy" src="/wp-content/uploads/2022/10/observability-solution-1024x499.png"></a></p>
<p><strong>OpenTelemetry Instrumentations &amp; Collector:</strong> Vendor-agnostic way to receive, process, and export telemetry data. <a href="https://opentelemetry.io/docs/">More Detail</a></p>
<p><strong>FluentBit:</strong> super fast, lightweight, and highly scalable logging and metrics processor and forwarder <a href="https://docs.fluentbit.io/manual">More Details</a></p>
<p><strong>Data Prepper:</strong> an open-source data collector for observability data (trace, logs, metrics) that can filter, enrich, transform, normalize, and aggregate data for downstream analysis and visualization <a href="https://github.com/opensearch-project/data-prepper">More Detail</a></p>
<p><strong>OpenSearch &amp; OpenSearch Dashboards:</strong> OpenSearch is a community-driven, Apache 2.0-licensed open-source search, that forked and developed from Elasticsearch 7.10 and its analytics suite that makes it easy to ingest, search, visualize, and analyze data. It consists of a data store and search engine (OpenSearch), and a visualization and user interface (OpenSearch Dashboards). <a href="https://opensearch.org/">More Detail</a></p>
<p><strong>Prometheus:</strong> open-source systems monitoring and alerting toolkit <a href="https://prometheus.io/docs/introduction/overview/">More Detail</a></p>
<p><strong>Grafana:</strong> Grafana allows you to query, visualize, alert on and understand your metrics no matter where they are stored <a href="https://grafana.com/oss/grafana/">More Detail</a></p>
<p>Alright, let&rsquo;s start with the quick demo, I&rsquo;ve below simple dummy microservices for this demonstration with different programming languages Nodejs, Go, and C# to showcase the language agnostic. For Metrics tried data-prepper as experimental and not included Prometheus since that is the common standard for metrics.</p>
<p><em>Sample application flow:</em></p>
<p><img loading="lazy" src="/wp-content/uploads/2022/10/observability-sample-1212.png"></p>
<p>These applications will send telemetry data (trace, metrics) information using the Opentelemetry instrumentation to the local OTel collector agent and the log will be written in a regular console and forwarded to Fluentbit. Then these OTel and Fluentbit agents send that information to data-prepper. Data-prepper transforms and stores it in OpenSearch.</p>
<p>Usually, the monitoring setup for a cloud-native application will be deployed on Kubernetes with service discovery and high availability, but this post is for a quick prototype and setup using a single node from all the components with the docker-compose files.</p>
<p>observability/docker-compose.yaml contain all the observability components</p>
<p>docker-compose.yaml contains the sample microservices containers.</p>
<p>Let&rsquo;s run it.</p>
<pre tabindex="0"><code>docker-compose -f observability/docker-compose.yaml up -d
docker-compose -f docker-compose.yaml up -d
</code></pre><p><img loading="lazy" src="/wp-content/uploads/2022/10/container-status-2-1024x269.png"></p>
<p>That&rsquo;s it, both application and observability containers are up and running, let me invoke chat initiate API from the browser</p>
<p><img loading="lazy" src="/wp-content/uploads/2022/10/chat-initate.png"></p>
<p>Awesome, we could see the logs, trace, and metrics information in our Open search UI :)</p>
<p><strong>Okay, today&rsquo;s challenges and what&rsquo;s Next?</strong></p>
<p>Logging <strong>:</strong> If you see our diagram there will be two agents Fluent and Opentelemetry Collector, the reason is that Opentelemetry Collector still doing development for the Logging signal for many programming languages. Very soon either one will be our agent for all signals(logs, trace, metrics) to collect, and forward from applications.</p>
<p>Another problem here, we used 3 programming languages, each using its own structure logging library Nodejs(Winston), .NET (Serilog), and Go (Zap) and all the Log Model is different, even the same we could see in the sample. If we want to achieve we should have a common contract across the programing language. <a href="https://opentelemetry.io/docs/reference/specification/logs/data-model/#log-and-event-record-definition">open telemetry Log Model</a> <a href="https://opentelemetry.io/docs/reference/specification/logs/data-model/#log-and-event-record-definition">specification</a> has this, once Opentelemetry Logging matures we will have this common structure and fields across the programing language without any additional efforts.</p>
<p>Below is the current status of open telemetry instrumentations for the programing language we used, for a complete supported programing language <a href="https://opentelemetry.io/docs/instrumentation/">visit here.</a></p>
<p><strong>Language<strong><strong>Traces</strong></strong>Metrics****Logs</strong>.NETstablestableLogger is stable but the exporter is not stableGostableAlphaNot yet implementedJavascriptstableRelease candidateDevelopment</p>
<p>Metrics: Data-Prepper and OpenSearch were tried as experimental but If you see the diagram Promotheious will be the solution for metrics, our example doesn&rsquo;t include the same, Promotehus have many features. I think Metrics are still experimental in data-prepper, but If Open search and data-prepper metrics are stable, I think in most use cases it would be an awesome solution.</p>
<p><strong>Conclusion:</strong> There are many tools and platforms available for observability solutions mostly some doing this in their specific area example tracing (Jaeger, Zipkin, etc) and Metrics(Promitious, etc), but one great benefit Open search tries to bring all the signals to one backend for better correlation and monitoring and fully open source solution.</p>
<p>Source Code GitHub URL: <a href="https://github.com/arulselvan/wizchat/tree/practice-observability">https://github.com/arulselvan/wizchat/tree/practice-observability</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://arulselvan.net/">Arul Selvan</a></span> · 

</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
